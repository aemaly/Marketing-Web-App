<!DOCTYPE html>
<html ng-app="nameApp">

<head>

    <title>
        Marketing Web Application
    </title>


    <script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.1/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

    <script>

        var nameApp = angular.module('nameApp', []);


        nameApp.controller('nameController',function($scope, $http){
            $scope.list = [];
            $scope.formData = {};
            $scope.firstName='';
            $scope.lastName='';
            $scope.submit = function(){
                if($scope.formData.firstName && $scope.formData.lastName){
                    $scope.list.push(this.formData);
                    }
            $http({
                method: 'POST',
                url: 'Scripts/data.js',
                data: $.param($scope.formData),
                headers: {'ContentType': 'application/x-www-form-urlencoded'}
            })
             .success(function(data) {
                console.log(data);

                if (!data.success) {

                    console.log("error: " + data);
                } else {

                    console.log("sucess: " + data);
                }
            });

                };
        });

        nameApp.controller('formController', function($scope,$http){
            $scope.formData={};
            $scope.processForm = function(){
                $http({
                    method  : 'POST',
                    url     : 'Scripts/data.js',
                    data    : $.param($scope.formData),  // pass in data as strings
                    headers : { 'Content-Type': 'application/x-www-form-urlencoded' }  // set the headers so angular passing info as form data (not request payload)
                })
                        .success(function(data) {
                            console.log(data);

                            if (!data.success) {

                                console.log("error: " + data);
                            } else {

                                console.log("sucess: " + data);
                            }
                        });
                    };
                });

        nameApp.controller('PersonCtrl',function($scope, $http){
            $http.get('people.json').success(function(data){
                $scope.people = data;
            });

        });


    </script>
</head>




<body>

<div ng-controller= "nameController" >
<form ng-submit="submit()">
    <label>First name:</label>
    <input ng-model="formData.firstName" type="text" name="FirstName" autofocus/>
    <br>
    <label>Last name:</label>
    <input ng-model="formData.lastName" type="text" name="LastName"/>
    <input type="submit" id="submit" value="Submit"/>
    Hello {{formData.firstName}} {{formData.lastName}}

</form>
<pre>{{formData}}</pre>
    <pre>list={{list}}</pre>
</div>

<div ng-controller="formController">
    <form ng-submit="processForm()">
        <!-- NAME -->
        <div id="name-group" class="form-group">
            <label>Name</label>
            <input type="text" name="name" class="form-control" placeholder="Enter Name" ng-model="formData.name">
            <span class="help-block"></span>
        </div>

        <!-- SUPERHERO NAME -->
        <div id="superhero-group" class="form-group">
            <label>Superhero Alias</label>
            <input type="text" name="superheroAlias" class="form-control" placeholder="Caped Crusader" ng-model="formData.superheroAlias">
            <span class="help-block"></span>
        </div>

        <!-- SUBMIT BUTTON -->
        <button type="submit" class="btn btn-success btn-lg btn-block">
            <span class="glyphicon glyphicon-flash"></span> Submit!
        </button>
    </form>

    <!-- SHOW DATA FROM INPUTS AS THEY ARE BEING TYPED -->
<pre>
    {{ formData }}
</pre>
</div>


<div ng-controller="PersonCtrl">
    Search:<input ng-model="query" type="text"/>
    <table>
        <tr>
            <th>Name</th>
            <th>Age</th>
        </tr>
        <tr ng-repeat="person in people | filter:query | orderBy:'age'">
        <td>{{person.name}}</td>
        <td>{{person.age}}</td>
        </tr>
    </table>

</div>

</body>
</html>